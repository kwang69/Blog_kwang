{"ast":null,"code":"import _classCallCheck from \"/Users/kwang/Documents/Projects/FT-REACT/node_modules/@babel/runtime/helpers/esm/classCallCheck\";\nimport _createClass from \"/Users/kwang/Documents/Projects/FT-REACT/node_modules/@babel/runtime/helpers/esm/createClass\";\nimport _possibleConstructorReturn from \"/Users/kwang/Documents/Projects/FT-REACT/node_modules/@babel/runtime/helpers/esm/possibleConstructorReturn\";\nimport _getPrototypeOf from \"/Users/kwang/Documents/Projects/FT-REACT/node_modules/@babel/runtime/helpers/esm/getPrototypeOf\";\nimport _inherits from \"/Users/kwang/Documents/Projects/FT-REACT/node_modules/@babel/runtime/helpers/esm/inherits\";\nvar _jsxFileName = \"/Users/kwang/Documents/Projects/FT-REACT/src/components/Mooc.js\";\nimport React, { Component } from 'react';\nimport { connect } from 'react-redux';\nimport { fetchMoocList, fetchMoocDetail, setLoading } from '../actions';\nimport $ from 'jquery';\nimport { Spin } from 'antd';\n\nvar Mooc =\n/*#__PURE__*/\nfunction (_Component) {\n  _inherits(Mooc, _Component);\n\n  function Mooc(props) {\n    var _this;\n\n    _classCallCheck(this, Mooc);\n\n    _this = _possibleConstructorReturn(this, _getPrototypeOf(Mooc).call(this, props));\n\n    _this.componentDidMount = function () {\n      _this.props.getMoocList();\n    };\n\n    _this.selectMooc = function (e) {\n      var id = $(e.currentTarget).data(\"id\");\n\n      _this.setState({\n        index: id\n      });\n\n      $('.m-mooc-chap span').hide();\n    };\n\n    _this.showMooc = function (e) {\n      var moocList = _this.props.moocList;\n      var moocId = _this.state.index;\n      var moocName = moocList[moocId].mooc;\n      var cid = $(e.currentTarget).data(\"cid\");\n      var lid = $(e.currentTarget).data(\"lid\");\n      var chapName = moocList[moocId].list[cid].chap;\n      var itemName = moocList[moocId].list[cid].list[lid];\n      var mp = \"\".concat(moocName, \"/\").concat(chapName, \"/\").concat(itemName);\n\n      _this.props.getMoocDetail(mp);\n    };\n\n    _this.slideMooc = function (e) {\n      var sl = $(e.currentTarget);\n      var show = sl.data('show');\n      show ? sl.data(\"show\", false).nextAll().hide() : sl.data(\"show\", true).nextAll().show();\n    };\n\n    _this.state = {\n      index: 0\n    };\n    return _this;\n  }\n\n  _createClass(Mooc, [{\n    key: \"render\",\n    value: function render() {\n      var _this2 = this;\n\n      var _this$props = this.props,\n          moocList = _this$props.moocList,\n          moocDetail = _this$props.moocDetail,\n          loading = _this$props.loading;\n      var index = this.state.index;\n      var chapList;\n\n      if (typeof moocList === 'undefined') {\n        moocList = [];\n        chapList = [];\n      } else {\n        chapList = moocList[index].list;\n      }\n\n      return React.createElement(\"div\", {\n        className: \"g-mooc\",\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 57\n        },\n        __self: this\n      }, loading ? React.createElement(\"div\", {\n        className: \"loading\",\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 58\n        },\n        __self: this\n      }, React.createElement(Spin, {\n        size: \"large\",\n        spinning: loading,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 58\n        },\n        __self: this\n      })) : '', React.createElement(\"div\", {\n        className: \"m-mooc-menu\",\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 59\n        },\n        __self: this\n      }, moocList.map(function (item, i) {\n        return React.createElement(\"div\", {\n          className: index === i ? \"m-mooc-item fn-active\" : \"m-mooc-item\",\n          key: i,\n          \"data-id\": i,\n          onClick: _this2.selectMooc,\n          __source: {\n            fileName: _jsxFileName,\n            lineNumber: 62\n          },\n          __self: this\n        }, React.createElement(\"span\", {\n          __source: {\n            fileName: _jsxFileName,\n            lineNumber: 63\n          },\n          __self: this\n        }, item.mooc));\n      })), React.createElement(\"div\", {\n        className: \"m-mooc-cnt\",\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 69\n        },\n        __self: this\n      }, React.createElement(\"div\", {\n        className: \"m-mooc-bar\",\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 70\n        },\n        __self: this\n      }, chapList.map(function (chap, i) {\n        return React.createElement(\"div\", {\n          className: \"m-mooc-chap\",\n          key: i,\n          __source: {\n            fileName: _jsxFileName,\n            lineNumber: 73\n          },\n          __self: this\n        }, React.createElement(\"label\", {\n          className: \"m-bar-item\",\n          \"data-show\": \"false\",\n          onClick: _this2.slideMooc,\n          __source: {\n            fileName: _jsxFileName,\n            lineNumber: 74\n          },\n          __self: this\n        }, chap.chap, \" \", React.createElement(\"i\", {\n          __source: {\n            fileName: _jsxFileName,\n            lineNumber: 74\n          },\n          __self: this\n        }, chap.list.length), \" \"), chap.list.map(function (v, j) {\n          return React.createElement(\"span\", {\n            className: \"m-bar-item fn-hide\",\n            key: j,\n            \"data-cid\": i,\n            \"data-lid\": j,\n            onClick: _this2.showMooc,\n            __source: {\n              fileName: _jsxFileName,\n              lineNumber: 77\n            },\n            __self: this\n          }, v);\n        }));\n      })), React.createElement(\"div\", {\n        className: \"m-mooc-main\",\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 84\n        },\n        __self: this\n      }, React.createElement(\"div\", {\n        className: \"markdown-body\",\n        dangerouslySetInnerHTML: {\n          __html: moocDetail\n        },\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 85\n        },\n        __self: this\n      }))));\n    }\n  }]);\n\n  return Mooc;\n}(Component);\n\nvar mapStateToProps = function mapStateToProps(state) {\n  return {\n    moocList: state.moocList,\n    moocDetail: state.moocDetail,\n    loading: state.loading\n  };\n};\n\nvar mapDispatchToProps = function mapDispatchToProps(dispatch) {\n  return {\n    getMoocList: function getMoocList() {\n      dispatch(setLoading());\n      dispatch(fetchMoocList());\n    },\n    getMoocDetail: function getMoocDetail(mpath) {\n      dispatch(setLoading());\n      dispatch(fetchMoocDetail(mpath));\n    }\n  };\n};\n\nexport default connect(mapStateToProps, mapDispatchToProps)(Mooc);","map":{"version":3,"sources":["/Users/kwang/Documents/Projects/FT-REACT/src/components/Mooc.js"],"names":["React","Component","connect","fetchMoocList","fetchMoocDetail","setLoading","$","Spin","Mooc","props","componentDidMount","getMoocList","selectMooc","e","id","currentTarget","data","setState","index","hide","showMooc","moocList","moocId","state","moocName","mooc","cid","lid","chapName","list","chap","itemName","mp","getMoocDetail","slideMooc","sl","show","nextAll","moocDetail","loading","chapList","map","item","i","length","v","j","__html","mapStateToProps","mapDispatchToProps","dispatch","mpath"],"mappings":"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","sourcesContent":["import React, { Component }  from 'react';\nimport { connect } from 'react-redux';\nimport { fetchMoocList,fetchMoocDetail,setLoading } from '../actions';\nimport $ from 'jquery';\nimport { Spin } from 'antd'; \n\nclass Mooc extends Component {\n\n  constructor(props) {\n    super(props);\n    this.state = {\n      index:0\n    };\n  }\n\n  componentDidMount = () =>{\n    this.props.getMoocList();\n  }\n\n  selectMooc = (e) => {\n    let id = $(e.currentTarget).data(\"id\");\n    this.setState({index:id});\n    $('.m-mooc-chap span').hide();\n  }\n\n  showMooc= (e) => {\n    let { moocList } = this.props;\n    let moocId = this.state.index;\n    let moocName = moocList[moocId].mooc;\n    let cid = $(e.currentTarget).data(\"cid\");\n    let lid = $(e.currentTarget).data(\"lid\");\n    let chapName = moocList[moocId].list[cid].chap;\n    let itemName = moocList[moocId].list[cid].list[lid];\n    let mp = `${moocName}/${chapName}/${itemName}`\n    this.props.getMoocDetail(mp);\n  }\n\n  slideMooc=(e)=>{\n    let sl = $(e.currentTarget);\n    let show = sl.data('show');\n    (show)?sl.data(\"show\",false).nextAll().hide():sl.data(\"show\",true).nextAll().show();\n  }\n\n  render() {  \n    let { moocList,moocDetail,loading } = this.props;\n    let { index } = this.state;\n    let chapList;\n\n    if ((typeof(moocList)==='undefined')) {\n      moocList = [];\n      chapList = [];\n    }else{\n      chapList = moocList[index].list;\n    }\n\n    return (\n      <div className=\"g-mooc\">\n        {loading?<div className=\"loading\"><Spin size=\"large\" spinning={loading}/></div>:''}\n        <div className=\"m-mooc-menu\">\n          {moocList.map((item,i)=>{\n            return(\n              <div className={(index===i)?`m-mooc-item fn-active`:`m-mooc-item`} key={i} data-id={i} onClick={this.selectMooc}>\n                <span>{item.mooc}</span>\n              </div>\n            )\n          })}\n        </div>\n\n        <div className=\"m-mooc-cnt\">\n          <div className=\"m-mooc-bar\">\n          {chapList.map((chap,i)=>{\n            return(\n              <div className=\"m-mooc-chap\"  key={i}>\n                <label className=\"m-bar-item\" data-show=\"false\" onClick={this.slideMooc}>{chap.chap} <i>{chap.list.length}</i> </label>\n                {chap.list.map((v,j)=>{\n                  return(\n                    <span className=\"m-bar-item fn-hide\" key={j} data-cid={i} data-lid={j} onClick={this.showMooc}>{v}</span>\n                  )\n                })}\n              </div>\n            )\n          })}\n          </div>\n          <div className=\"m-mooc-main\">\n          <div className=\"markdown-body\" dangerouslySetInnerHTML = {{ __html:moocDetail }}></div>\n          </div>\n          \n        </div>\n\n      </div>\n    )\n  }\n}\n\n\nconst mapStateToProps  = (state) => ({\n  moocList: state.moocList,\n  moocDetail: state.moocDetail,\n  loading: state.loading,\n});\n\nconst mapDispatchToProps = (dispatch) => {\n  return {\n    getMoocList: () => {\n      dispatch( setLoading() );\n      dispatch(fetchMoocList());\n    },\n    getMoocDetail: (mpath) => {\n      dispatch( setLoading() );\n      dispatch(fetchMoocDetail(mpath));\n    },\n  }\n}\n\nexport default connect(mapStateToProps,mapDispatchToProps)(Mooc);\n\n"]},"metadata":{},"sourceType":"module"}